# VeriBridge Server Environment Variables
# Copy this to .env and fill in your values

# Server
PORT=3001
NODE_ENV=development
BASE_URL=http://localhost:3001

# Client URL (for CORS)
CLIENT_URL=http://localhost:5173

# Database (PostgreSQL via Supabase)
# Get your connection string from: https://supabase.com/dashboard/project/_/settings/database
# 
# For Prisma Migrations (use Direct Connection):
# DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
#
# For Production/Serverless (use Connection Pooling):
# DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:6543/postgres?pgbouncer=true
#
# Example Direct URL (for local development & migrations):
DATABASE_URL=postgresql://postgres:yourpassword@db.xxxxxxxxxxxxx.supabase.co:5432/postgres

# Optional: For transaction mode (set if using pooling in production)
# DIRECT_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres


# JWT Authentication
# CRITICAL: Generate a strong secret for production!
# Run: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Example: 20f4a2c84e8e99327f51af11714b4078e027a4a440ebf717c52238420b212f1c
JWT_SECRET=CHANGE-THIS-TO-A-STRONG-RANDOM-SECRET-IN-PRODUCTION
JWT_EXPIRES_IN=7d

# MPESA (Daraja API)
# Get credentials from https://developer.safaricom.co.ke/
MPESA_CONSUMER_KEY=your-consumer-key
MPESA_CONSUMER_SECRET=your-consumer-secret
MPESA_SHORTCODE=174379
MPESA_PASSKEY=your-passkey
MPESA_CALLBACK_URL=https://your-domain.com/api/payments/callback
MPESA_ENV=sandbox

# Email (SMTP Configuration)
# REQUIRED for email verification and password reset!
# Option 1: Gmail (easy for development)
#   1. Enable 2FA: https://myaccount.google.com/security
#   2. Create App Password: https://myaccount.google.com/apppasswords
#   3. Use the 16-character password (remove spaces)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-gmail-app-password

# Option 2: SendGrid (recommended for production)
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASS=your-sendgrid-api-key

# Redis (for caching/sessions)
REDIS_URL=redis://localhost:6379

# Logging
LOG_LEVEL=debug

# Company Formation Services
# UK Companies House API
# Register at https://developer-specs.company-information.service.gov.uk/
COMPANIES_HOUSE_API_KEY=a3f04f0c-3e02-40f1-8e11-20e101385f62

# Paystack (Payment Gateway)
# Get keys from https://paystack.com/
PAYSTACK_SECRET_KEY=sk_test_your-secret-key-here
# Note: Public key goes in client .env.local as VITE_PAYSTACK_PUBLIC_KEY

# Email Notifications
ADMIN_EMAIL=admin@veribadge.co.ke

# Sanctions Screening (OpenSanctions)
# Optional: Enhances AML compliance checks
OPENSANCTIONS_API_KEY=your-opensanctions-api-key

# ============================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ============================================
# Before going live:
# ✅ Generate strong JWT_SECRET (run command above)
# ✅ Configure SMTP with real credentials
# ✅ Update CLIENT_URL to production domain (e.g., https://veribridge.com)
# ✅ Switch Paystack to live keys (sk_live_...)
# ✅ Set NODE_ENV=production
# ✅ Enable HTTPS only
# ✅ Review token expiry times (currently: JWT=7d, email verification=24h, password reset=1h)
